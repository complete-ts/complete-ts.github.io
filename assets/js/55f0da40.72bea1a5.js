"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4650],{2250:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>r});var s=t(1085),o=t(1184);const i={},l="Comments",a={id:"eslint-plugin-complete/comments",title:"Comments",description:"eslint-plugin-complete contains several rules that make working with comments very strict. Why would anyone want to subject themselves to that?",source:"@site/docs/eslint-plugin-complete/comments.md",sourceDirName:"eslint-plugin-complete",slug:"/eslint-plugin-complete/comments",permalink:"/eslint-plugin-complete/comments",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"eslint-plugin-complete",permalink:"/eslint-plugin-complete"},next:{title:"complete-sentences-jsdoc",permalink:"/eslint-plugin-complete/rules/complete-sentences-jsdoc"}},c={},r=[{value:"The Types of Comments",id:"the-types-of-comments",level:2},{value:"Line Comments",id:"line-comments",level:3},{value:"Block Comments",id:"block-comments",level:3},{value:"JSDoc Comments",id:"jsdoc-comments",level:3},{value:"Ignoring In-Line Comments",id:"ignoring-in-line-comments",level:2},{value:"Annotating Information on Variables and Functions",id:"annotating-information-on-variables-and-functions",level:2},{value:"Using a Ruler",id:"using-a-ruler",level:2},{value:"Using JSDoc With a Ruler",id:"using-jsdoc-with-a-ruler",level:2},{value:"Using Line Comments With a Ruler",id:"using-line-comments-with-a-ruler",level:2},{value:"Consistency With Line Comments and JSDoc Comments",id:"consistency-with-line-comments-and-jsdoc-comments",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"comments",children:"Comments"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"eslint-plugin-complete"})," contains several rules that make working with comments very strict. Why would anyone want to subject themselves to that?"]}),"\n",(0,s.jsx)(n.p,{children:"Let's have a short discussion on the motivation for these rules."}),"\n",(0,s.jsx)(n.h2,{id:"the-types-of-comments",children:"The Types of Comments"}),"\n",(0,s.jsx)(n.p,{children:"First, some jargon:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"//"}),' characters represent a "line" comment.']}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"/*"}),' characters represent a "block" comment. (It is ended with ',(0,s.jsx)(n.code,{children:"*/"}),".)"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"/**"}),' characters represent a "',(0,s.jsx)(n.a,{href:"https://jsdoc.app/",children:"JSDoc"}),'" comment. (It is also ended with ',(0,s.jsx)(n.code,{children:"*/"}),".)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"line-comments",children:"Line Comments"}),"\n",(0,s.jsxs)(n.p,{children:["When line comments are on the same line as code, they are called ",(0,s.jsx)(n.em,{children:"trailing line comments"}),". For example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"foo(); // hello world\n"})}),"\n",(0,s.jsxs)(n.p,{children:["When line comments are on their own line, they are called ",(0,s.jsx)(n.em,{children:"leading line comments"}),". For example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// hello world\nfoo();\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Leading line comments"})," can be either be single-line, or multi-line:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// This is a single-line line comment!\n\n// This is a multi-line line comment! It's so long that\n// it spills over on to the next line!\n"})}),"\n",(0,s.jsx)(n.h3,{id:"block-comments",children:"Block Comments"}),"\n",(0,s.jsx)(n.p,{children:"Block comments are ignored by the rules of this plugin, since they are typically used to comment out blocks of code. For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"/*\nfoo();\nbar();\n*/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"jsdoc-comments",children:"JSDoc Comments"}),"\n",(0,s.jsxs)(n.p,{children:["JSDoc is a type of block comment that has a ",(0,s.jsx)(n.a,{href:"https://jsdoc.app/about-getting-started.html",children:"strictly defined format"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Like line comments, JSDoc comments can either be single-line or multi-line:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"/** This is a single-line comment! */\n\n/**\n * This is a multi-line line comment! It's so long that\n * it spills over on to the next line!\n */\n"})}),"\n",(0,s.jsx)(n.p,{children:"Multi-line JSDoc comments use asterisks to denote the beginning of each line."}),"\n",(0,s.jsx)(n.h2,{id:"ignoring-in-line-comments",children:"Ignoring In-Line Comments"}),"\n",(0,s.jsxs)(n.p,{children:["With the definitions out of the way, let's talk about how we use the different kinds of comments. It is common to use ",(0,s.jsx)(n.em,{children:"trailing line comments"})," to write quick annotations:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"foo(); // initialize the data\nbar(); // probably not needed but just in case\n"})}),"\n",(0,s.jsx)(n.p,{children:"In this circumstance, it would probably be a waste of time to force the programmer to write the comments in complete sentences, like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"foo(); // We call this function to initialize the data.\nbar(); // Calling this function is probably not needed, but we call it just in case.\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Thus, ",(0,s.jsx)(n.em,{children:"trailing line comments"})," are ignored by the rules in this plugin."]}),"\n",(0,s.jsx)(n.h2,{id:"annotating-information-on-variables-and-functions",children:"Annotating Information on Variables and Functions"}),"\n",(0,s.jsxs)(n.p,{children:["In contrast to ",(0,s.jsx)(n.em,{children:"trailing line comments"}),", ",(0,s.jsx)(n.em,{children:"leading line comments"})," are usually longer and more detailed. For example, say that we want to document something about the ",(0,s.jsx)(n.code,{children:"foo"})," variable:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// matches the USS design document, section D\nconst foo = 100;\n"})}),"\n",(0,s.jsxs)(n.p,{children:['This is a good start. But the problem with annotating this information with a line comment is that it doesn\'t get "attached" to the variable. For example, in VSCode, if we hover over the ',(0,s.jsx)(n.code,{children:"foo"})," variable (either at the declaration or elsewhere in the code), we would see that it has a value of 100, but we wouldn't see what the comment is."]}),"\n",(0,s.jsx)(n.p,{children:"To fix this problem, we can annotate the information as a JSDoc comment instead:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"/** matches the USS design document, section D */\nconst foo = 100;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now, wherever we happen to be in the code, we can always mouse over ",(0,s.jsx)(n.code,{children:"foo"})," to see the comment. Nice! (And if we use a documentation generator like ",(0,s.jsx)(n.a,{href:"https://github.com/TypeStrong/typedoc",children:"TypeDoc"}),", it would automatically go in the generated documentation.)"]}),"\n",(0,s.jsxs)(n.p,{children:["However, one problem remains. You are ",(0,s.jsx)(n.a,{href:"https://jsdoc.app/about-getting-started.html",children:"supposed to use complete sentences in JSDoc comments"}),", because it represents official information that will be extracted out and put on a documentation webpage. So we should update the comment to be like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"/** Matches the USS design document, section D. */\nconst foo = 100;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Subsequently, it makes sense to have a linting rule to ensure that all JSDoc comments have complete sentences in them. This is the point of the ",(0,s.jsx)(n.a,{href:"/eslint-plugin-complete/rules/complete-sentences-jsdoc",children:(0,s.jsx)(n.code,{children:"complete/complete-sentences-jsdoc"})})," rule. (It is much smarter than the similar ",(0,s.jsx)(n.a,{href:"https://github.com/gajus/eslint-plugin-jsdoc/blob/master/.README/rules/require-description-complete-sentence.md",children:(0,s.jsx)(n.code,{children:"jsdoc/require-description-complete-sentence"})})," rule.)"]}),"\n",(0,s.jsx)(n.h2,{id:"using-a-ruler",children:"Using a Ruler"}),"\n",(0,s.jsx)(n.p,{children:"Many code projects have conventions to prevent lines from getting over a certain amount of characters. This kind of thing ensures that code is easy to read. It also is helpful to people with seeing disabilities, and for developers who prefer to open two files side by side."}),"\n",(0,s.jsxs)(n.p,{children:["In JavaScript/TypeScript, ESLint provides the ",(0,s.jsx)(n.a,{href:"https://eslint.org/docs/latest/rules/max-len",children:(0,s.jsx)(n.code,{children:"max-len"})})," lint rule. This lint rule is often accompanied by an on-screen ruler inside of the IDE. Having the ruler on-screen is very nice, as it can accurately show when a line is over the limit. For example, to enable the ruler in VSCode:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "editor.rulers": [100]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Formatters such as ",(0,s.jsx)(n.a,{href:"https://prettier.io/",children:"Prettier"})," have taken this concept to the next level. Prettier automatically reformats your code to stay within the line limit. Since it happens automatically, using Prettier is a huge timer-saver!"]}),"\n",(0,s.jsx)(n.h2,{id:"using-jsdoc-with-a-ruler",children:"Using JSDoc With a Ruler"}),"\n",(0,s.jsx)(n.p,{children:"Code comments should stay to the left of the ruler for the exact same reasons that normal code should. Unfortunately, Prettier does not automatically reformat JSDoc comments. This makes working with them a real pain."}),"\n",(0,s.jsx)(n.p,{children:"For example, say that you have the following JSDoc comment:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"/**\n * But I must explain to you how all this mistaken idea of denouncing pleasure and praising pain was\n * born and I will give you a complete account of the system, and expound the actual teachings of\n * the great explorer of the truth, the master-builder of human happiness. No one rejects, dislikes,\n * or avoids pleasure itself, because it is pleasure, but because those who do not know how to\n * pursue pleasure rationally encounter consequences that are extremely painful.\n */\n"})}),"\n",(0,s.jsx)(n.p,{children:'This comment is aligned with a ruler of 100 characters. Imagine that I need to add some new information before the "No one rejects" sentence:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"/**\n * But I must explain to you how all this mistaken idea of denouncing pleasure and praising pain was\n * born and I will give you a complete account of the system, and expound the actual teachings of\n * the great explorer of the truth, the master-builder of human happiness. ADDING SOME INFORMATION HERE. No one rejects, dislikes,\n * or avoids pleasure itself, because it is pleasure, but because those who do not know how to\n * pursue pleasure rationally encounter consequences that are extremely painful.\n */\n"})}),"\n",(0,s.jsx)(n.p,{children:"Oh no! Now we have to manually re-adjust the next N lines of the block in order to keep everything aligned."}),"\n",(0,s.jsxs)(n.p,{children:["This annoying problem is why the ",(0,s.jsx)(n.a,{href:"/eslint-plugin-complete/rules/complete-sentences-jsdoc",children:(0,s.jsx)(n.code,{children:"complete/format-jsdoc-comments"})}),' rule exists. After adding the "ADDING SOME INFORMATION HERE", all we have to do is save the file, and all of the subsequent lines will be automatically adjusted.']}),"\n",(0,s.jsx)(n.h2,{id:"using-line-comments-with-a-ruler",children:"Using Line Comments With a Ruler"}),"\n",(0,s.jsxs)(n.p,{children:["The same problem happens with multi-line ",(0,s.jsx)(n.em,{children:"leading line comments"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// But I must explain to you how all this mistaken idea of denouncing pleasure and praising pain was\n// born and I will give you a complete account of the system, and expound the actual teachings of\n// the great explorer of the truth, the master-builder of human happiness. ADDING SOME INFORMATION HERE. No one rejects, dislikes,\n// or avoids pleasure itself, because it is pleasure, but because those who do not know how to\n// pursue pleasure rationally encounter consequences that are extremely painful.\n"})}),"\n",(0,s.jsx)(n.p,{children:'After adding "ADDING INFORMATION HERE", we have to manually re-adjust the next N lines of the block in order to keep everything aligned.'}),"\n",(0,s.jsxs)(n.p,{children:["Similar to the ",(0,s.jsx)(n.code,{children:"format-jsdoc-comments"})," rule, the ",(0,s.jsx)(n.a,{href:"/eslint-plugin-complete/rules/format-line-comments",children:(0,s.jsx)(n.code,{children:"complete/format-line-comments"})})," rule saves us from the tedium of manually formatting."]}),"\n",(0,s.jsx)(n.h2,{id:"consistency-with-line-comments-and-jsdoc-comments",children:"Consistency With Line Comments and JSDoc Comments"}),"\n",(0,s.jsxs)(n.p,{children:["You might notice that in general, there is a bit of asymmetry between JSDoc comments and ",(0,s.jsx)(n.em,{children:"leading line comments"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Specifically, you might already know that you are supposed to use complete sentences for JSDoc comments. But you might not use complete sentences for your ",(0,s.jsx)(n.em,{children:"leading line comments"}),". For example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// This is how we do things here\n// I don't know why\n// It's just the way it is\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In this style, line breaks are used instead of periods. This kind of style can look nice under certain circumstances. But once we are committed to using the ",(0,s.jsx)(n.code,{children:"format-line-comments"})," rule, this style becomes an anti-pattern, because the rule will change it to this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// This is how we do things here I don't know why It's just the way it is\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In order to prevent this from happening, the ",(0,s.jsx)(n.a,{href:"/eslint-plugin-complete/rules/complete-sentences-line-comments",children:(0,s.jsx)(n.code,{children:"complete/complete-sentences-line-comments"})})," rule forces you to use complete sentences for any ",(0,s.jsx)(n.em,{children:"leading line comment"}),". In the previous example, once we use complete sentences, it gets auto-formatted to this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// This is how we do things here. I don't know why. It's just the way it is.\n"})}),"\n",(0,s.jsx)(n.p,{children:"Much better!"}),"\n",(0,s.jsxs)(n.p,{children:["Even if you don't use the ",(0,s.jsx)(n.code,{children:"format-line-comments"})," rule, having consistency between JSDoc comments and line comments is a good thing. Why should JSDoc comments be styled one way (with complete sentences) and ",(0,s.jsx)(n.em,{children:"leading line comments"}),' styled another way (without complete sentences)? Having a mismatch here is distracting for someone reading the code, and confusing for someone trying to work on the code: "Am I supposed to use punctuation here or not?" Better to make things always consistent.']}),"\n",(0,s.jsxs)(n.p,{children:["Finally, note that complete-sentences are not enforced for certain kinds of single-line ",(0,s.jsx)(n.em,{children:"leading line comments"}),". For example, the rule allows you to make quick annotations like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Local variables\nlet a;\nlet b;\nlet c;\n\n// Constants\nconst foo = 123;\nconst bar = 456;\n"})}),"\n",(0,s.jsx)(n.p,{children:"All of the rules in this plugin are designed to try and be as smart as possible. They are trying to hit the sweet spot between false positives and false negatives. You can open a GitHub issue if you find a situation where this rule should be smarter."})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1184:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var s=t(4041);const o={},i=s.createContext(o);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);